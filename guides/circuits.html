
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Circuits guide &#8212; Orquestra Core Documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/autoapi.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Guides" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/orquestra.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Orquestra Core Documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tutorials/index.html">
   Tutorials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/beginner_tutorial.html">
     Getting Started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/basic_qaoa.html">
     Solving MaxCut with QAOA
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/orq_core_structure.html">
     Package Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/integrations.html">
     Integrations, Modules, and Libraries in Orquestra Core
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tutorials/contributing.html">
     Contributing to Orquestra Core
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Guides
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Circuits guide
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api/index.html">
   API Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api/vqa/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       vqa
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/vqa/grouping/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         vqa.grouping
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/vqa/parameter_initialization/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         vqa.parameter_initialization
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/vqa/shot_allocation/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         vqa.shot_allocation
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/vqa/testing/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         vqa.testing
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/vqa/testing/mock_objects/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           vqa.testing.mock_objects
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/vqa/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         vqa.utils
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api/integrations/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       integrations
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/integrations/cirq/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         integrations.cirq
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/cirq/conversions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.cirq.conversions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/cirq/decompositions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.cirq.decompositions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/cirq/noise/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.cirq.noise
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/cirq/simulator/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.cirq.simulator
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/integrations/forest/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         integrations.forest
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/forest/conversions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.forest.conversions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/forest/simulator/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.forest.simulator
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/integrations/qiskit/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         integrations.qiskit
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qiskit/backend/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qiskit.backend
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qiskit/conversions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qiskit.conversions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qiskit/noise/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qiskit.noise
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qiskit/simulator/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qiskit.simulator
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/integrations/qulacs/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         integrations.qulacs
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qulacs/conversions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qulacs.conversions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/integrations/qulacs/simulator/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           integrations.qulacs.simulator
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api/opt/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       opt
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/opt/api/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.api
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
      <label for="toctree-checkbox-12">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/bqm_solver/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.bqm_solver
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/bqm_solver_test/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.bqm_solver_test
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/cost_function/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.cost_function
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/example_functions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.example_functions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/functions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.functions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/optimizer_test/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.optimizer_test
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/problem/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.problem
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/api/save_conditions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.api.save_conditions
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/opt/bqm/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.bqm
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
      <label for="toctree-checkbox-13">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/bqm/conversions/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.bqm.conversions
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/bqm/io/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.bqm.io
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/bqm/utils/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.bqm.utils
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/opt/history/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.history
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/history/recorder/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.history.recorder
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/opt/optimizers/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.optimizers
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
      <label for="toctree-checkbox-15">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/basin_hopping/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.basin_hopping
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/cma_es_optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.cma_es_optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/qiskit_optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.qiskit_optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/scikit_quant_optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.scikit_quant_optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/scipy_optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.scipy_optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/search_points_optimizer/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.search_points_optimizer
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/optimizers/simple_gradient_descent/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.optimizers.simple_gradient_descent
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/opt/problems/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.problems
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
      <label for="toctree-checkbox-16">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/generators/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.generators
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/graph/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.graph
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/graph_partition/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.graph_partition
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/max_independent_set/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.max_independent_set
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/maxcut/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.maxcut
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/opt/problems/vertex_cover/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           opt.problems.vertex_cover
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/opt/convex/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.convex
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/opt/cost_function_augmentations/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.cost_function_augmentations
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/opt/gradients/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.gradients
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/opt/mock_objects/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         opt.mock_objects
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api/quantum/index.html">
     <code class="xref py py-mod docutils literal notranslate">
      <span class="pre">
       quantum
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
    <label for="toctree-checkbox-17">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/api/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.api
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
      <label for="toctree-checkbox-18">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/api/backend/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.api.backend
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/api/backend_test/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.api.backend_test
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/api/estimation/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.api.estimation
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/api/estimator_contract/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.api.estimator_contract
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/circuits/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.circuits
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
      <label for="toctree-checkbox-19">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/circuits/symbolic/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.circuits.symbolic
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/circuits/layouts/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.circuits.layouts
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/decompositions/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.decompositions
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/distributions/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.distributions
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
      <label for="toctree-checkbox-20">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/distributions/BAS_dataset/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.distributions.BAS_dataset
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/distributions/clipped_negative_log_likelihood/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.distributions.clipped_negative_log_likelihood
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/distributions/jensen_shannon_divergence/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.distributions.jensen_shannon_divergence
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/distributions/mmd/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.distributions.mmd
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/distributions/target_thermal_states/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.distributions.target_thermal_states
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/estimation/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.estimation
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/measurements/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.measurements
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
      <label for="toctree-checkbox-21">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/measurements/expectation_values/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.measurements.expectation_values
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/measurements/measurements/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.measurements.measurements
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/measurements/parities/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.measurements.parities
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/openfermion/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.openfermion
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
      <label for="toctree-checkbox-22">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/chem/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.chem
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/circuits/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.circuits
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/hamiltonians/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.hamiltonians
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/linalg/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.linalg
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/measurements/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.measurements
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/ops/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.ops
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/testing/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.testing
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/transforms/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.transforms
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/utils/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.utils
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/zapata_utils/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.zapata_utils
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/openfermion/config/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.openfermion.config
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api/quantum/testing/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.testing
        </span>
       </code>
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
      <label for="toctree-checkbox-23">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/testing/generate_cases_for_backend_tests/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.testing.generate_cases_for_backend_tests
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/testing/mocks/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.testing.mocks
          </span>
         </code>
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api/quantum/testing/test_cases_for_backend_tests/index.html">
         <code class="xref py py-mod docutils literal notranslate">
          <span class="pre">
           quantum.testing.test_cases_for_backend_tests
          </span>
         </code>
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/evolution/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.evolution
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/symbolic_simulator/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.symbolic_simulator
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/trackers/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.trackers
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/typing/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.typing
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/utils/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.utils
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api/quantum/wavefunction/index.html">
       <code class="xref py py-mod docutils literal notranslate">
        <span class="pre">
         quantum.wavefunction
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-this-guide-covers">
   What this guide covers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-problem">
   The problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-circuit-information">
   General
   <code class="docutils literal notranslate">
    <span class="pre">
     Circuit
    </span>
   </code>
   information
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#circuit-architecture">
     Circuit architecture
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-circuit">
     Creating a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-the-unitary-matrix-of-a-circuit">
     Getting the unitary matrix of a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverting-a-circuit">
     Inverting a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#appending-operations-to-a-circuit">
     Appending operations to a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inspecting-circuits-and-components">
     Inspecting circuits and components
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#powers-of-gates-and-gate-exponentials">
     Powers of gates and gate exponentials
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gate-operations-vs-wave-function-operations">
     Gate operations vs wave function operations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#symbolic-gates">
   Symbolic gates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-gates-with-symbolic-parameters">
     Using gates with symbolic parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#binding-parameters">
     Binding parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-custom-gates">
   Using custom gates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#defining-custom-gates">
     Defining custom gates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#instantiating-custom-gates">
     Instantiating custom gates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-custom-gates-from-a-circuit">
     Getting custom gates from a circuit
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#decompositions">
   Decompositions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-decompositionrule">
     Creating a
     <code class="docutils literal notranslate">
      <span class="pre">
       DecompositionRule
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-a-decompositionrule">
     Using a
     <code class="docutils literal notranslate">
      <span class="pre">
       DecompositionRule
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#built-in-decompositions">
     Built-in decompositions
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Circuits guide</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-this-guide-covers">
   What this guide covers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-problem">
   The problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-circuit-information">
   General
   <code class="docutils literal notranslate">
    <span class="pre">
     Circuit
    </span>
   </code>
   information
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#circuit-architecture">
     Circuit architecture
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-circuit">
     Creating a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-the-unitary-matrix-of-a-circuit">
     Getting the unitary matrix of a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inverting-a-circuit">
     Inverting a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#appending-operations-to-a-circuit">
     Appending operations to a circuit
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inspecting-circuits-and-components">
     Inspecting circuits and components
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#powers-of-gates-and-gate-exponentials">
     Powers of gates and gate exponentials
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#gate-operations-vs-wave-function-operations">
     Gate operations vs wave function operations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#symbolic-gates">
   Symbolic gates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-gates-with-symbolic-parameters">
     Using gates with symbolic parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#binding-parameters">
     Binding parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-custom-gates">
   Using custom gates
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#defining-custom-gates">
     Defining custom gates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#instantiating-custom-gates">
     Instantiating custom gates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-custom-gates-from-a-circuit">
     Getting custom gates from a circuit
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#decompositions">
   Decompositions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-decompositionrule">
     Creating a
     <code class="docutils literal notranslate">
      <span class="pre">
       DecompositionRule
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-a-decompositionrule">
     Using a
     <code class="docutils literal notranslate">
      <span class="pre">
       DecompositionRule
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#built-in-decompositions">
     Built-in decompositions
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="circuits-guide">
<h1>Circuits guide<a class="headerlink" href="#circuits-guide" title="Permalink to this headline">#</a></h1>
<div class="section" id="what-this-guide-covers">
<h2>What this guide covers<a class="headerlink" href="#what-this-guide-covers" title="Permalink to this headline">#</a></h2>
<p>This guide is an in-depth dive into the <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> class within Orquestra Core. In it, we’ll cover advanced capabilities that can be performed using <code class="docutils literal notranslate"><span class="pre">Circuit</span></code>s like using symbolic gates, creating your own gates, and building decomposition rules. If you’re looking for a place to get started, please see <a class="reference internal" href="../tutorials/beginner_tutorial.html#creating-basic-circuits"><span class="std std-ref">the basics tutorial</span></a> before diving into the advanced capabilities here.</p>
</div>
<div class="section" id="the-problem">
<h2>The problem<a class="headerlink" href="#the-problem" title="Permalink to this headline">#</a></h2>
<p>In this guide we will use the example of creating a QAOA circuit to solve a 3-node, fully-connected maxcut problem as motivation for showcasing the capabilities of <code class="docutils literal notranslate"><span class="pre">Circuit</span></code>s in Orquestra Core. Our <a class="reference internal" href="../tutorials/basic_qaoa.html#qaoa"><span class="std std-ref">Basic QAOA Tutorial</span></a> walks through using Orquestra Core’s built-in QAOA functionality to solve the problem from circuit creation through to a final result. Here, we’ll do a smaller example and build the circuit we can use to solve the problem later.</p>
<p>Here is the overall circuit we want to build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>     ┌───┐ ░                                                                             ░ ┌──────────────┐
q_0: ┤ H ├─░───■───────────────────■────■───────────────────■────────────────────────────░─┤ Rx($\gamma$) ├
     ├───┤ ░ ┌─┴─┐┌─────────────┐┌─┴─┐  │                   │                            ░ ├──────────────┤
q_1: ┤ H ├─░─┤ X ├┤ Rz($\beta$) ├┤ X ├──┼───────────────────┼────■───────────────────■───░─┤ Rx($\gamma$) ├
     ├───┤ ░ └───┘└─────────────┘└───┘┌─┴─┐┌─────────────┐┌─┴─┐┌─┴─┐┌─────────────┐┌─┴─┐ ░ ├──────────────┤
q_2: ┤ H ├─░──────────────────────────┤ X ├┤ Rz($\beta$) ├┤ X ├┤ X ├┤ Rz($\beta$) ├┤ X ├─░─┤ Rx($\gamma$) ├
     └───┘ ░                          └───┘└─────────────┘└───┘└───┘└─────────────┘└───┘ ░ └──────────────┘
</pre></div>
</div>
</div>
<div class="section" id="general-circuit-information">
<h2>General <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> information<a class="headerlink" href="#general-circuit-information" title="Permalink to this headline">#</a></h2>
<div class="section" id="circuit-architecture">
<h3>Circuit architecture<a class="headerlink" href="#circuit-architecture" title="Permalink to this headline">#</a></h3>
<p>Orquestra Core represents quantum circuits with the <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> class, which contains multiple <code class="docutils literal notranslate"><span class="pre">Operation</span></code>s. The most common operation type is a <code class="docutils literal notranslate"><span class="pre">GateOperation</span></code>, which we’ll focus on here, although in some circumstances <a class="reference internal" href="#wavefunction-operations"><span class="std std-ref">wavefunction operations</span></a> can be useful as well.</p>
<p>If you would like to follow along with this guide, please create a new python file and start it with the imports we’ll need to ensure the rest of the code examples can be run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">orquestra.quantum.circuits</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Circuit</span><span class="p">,</span>
    <span class="n">H</span><span class="p">,</span>
    <span class="n">RZ</span><span class="p">,</span>
    <span class="n">CNOT</span><span class="p">,</span>
    <span class="n">RX</span><span class="p">,</span>
    <span class="n">CZ</span><span class="p">,</span>
    <span class="n">CustomGateDefinition</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">orquestra.quantum.decompositions</span> <span class="kn">import</span> <span class="n">decompose_operations</span>
<span class="kn">import</span> <span class="nn">sympy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">icecream</span> <span class="kn">import</span> <span class="n">ic</span>

<span class="n">N_QUBITS</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Notice we also defined a variable for the number of qubits we’ll be working with. This will make using some list comprehensions easier down the line.</p>
</div>
<div class="section" id="creating-a-circuit">
<span id="creating-circuits"></span><h3>Creating a circuit<a class="headerlink" href="#creating-a-circuit" title="Permalink to this headline">#</a></h3>
<p>For this QAOA problem, the first part of the circuit we need to create is the initial state preparation. This can be done by putting a Hadamard gate on each qubit. In the end we want the initial state preparation circuit to look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>     ┌───┐
q_0: ┤ H ├
     ├───┤
q_1: ┤ H ├
     ├───┤
q_2: ┤ H ├
     └───┘
</pre></div>
</div>
<p>We do this in our example using a <a class="reference external" href="https://www.w3schools.com/python/python_lists_comprehension.asp">list comprehension</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">state_prep_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">H</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_QUBITS</span><span class="p">)])</span>
</pre></div>
</div>
<p>We could have also explicitly put a Hadamard gate on each qubit index too, as we will see in the section on <a class="reference internal" href="#appending-circuits"><span class="std std-ref">appending circuits</span></a>.</p>
</div>
<div class="section" id="getting-the-unitary-matrix-of-a-circuit">
<span id="getting-unitary"></span><h3>Getting the unitary matrix of a circuit<a class="headerlink" href="#getting-the-unitary-matrix-of-a-circuit" title="Permalink to this headline">#</a></h3>
<p>Now let’s inspect some aspects of the unitary of the circuit, just as a sanity check to see that everything makes sense. We can convert our circuit to a unitary matrix with the <code class="docutils literal notranslate"><span class="pre">.to_unitary()</span></code> method. In this case, we should see that the shape of the unitary is an 8x8 matrix (because we have a circuit that operates on 3 qubits) and the type should be a numpy ndarray.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">unitary</span> <span class="o">=</span> <span class="n">state_prep_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="n">unitary</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should be 8x8 matrix</span>
<span class="n">ic</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">unitary</span><span class="p">))</span>  <span class="c1"># will be numpy ndarray, later see sympy matrix</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">icecream</span></code> (and <code class="docutils literal notranslate"><span class="pre">ic</span></code>) is like <code class="docutils literal notranslate"><span class="pre">print</span></code>, but offers more information about what is being printed. It’s great for debugging! Just install it with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">icecream</span></code></p>
<p>If you would rather just use <code class="docutils literal notranslate"><span class="pre">print</span></code>, everything in this tutorial should still work! Just replace <code class="docutils literal notranslate"><span class="pre">ic()</span></code> with <code class="docutils literal notranslate"><span class="pre">print()</span></code> and all will be well.</p>
</div>
<p>The output we get from those two <code class="docutils literal notranslate"><span class="pre">icecream</span></code> statements should be</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| unitary.shape: (8, 8)
ic| type(unitary): &lt;class &#39;numpy.ndarray&#39;&gt;
</pre></div>
</div>
</div>
<div class="section" id="inverting-a-circuit">
<h3>Inverting a circuit<a class="headerlink" href="#inverting-a-circuit" title="Permalink to this headline">#</a></h3>
<p>In some contexts, you may want to invert a circuit. For instance, if instead of <a class="reference internal" href="../tutorials/beginner_tutorial.html#creating-basic-circuits"><span class="std std-ref">building a bell state</span></a>, you want to perform a bell measurement. Or perhaps your circuit requires some <a class="reference external" href="https://quantum.country/search#building-blocks-quantum-search">uncomputation</a> that you don’t want to build manually. To get the inverse of a circuit, just call the <code class="docutils literal notranslate"><span class="pre">.inverse()</span></code> method on it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inverse_state_prep_circ</span> <span class="o">=</span> <span class="n">state_prep_circ</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="n">inverse_state_prep_circ</span><span class="p">)</span>
<span class="n">combined_circ</span> <span class="o">=</span> <span class="n">state_prep_circ</span> <span class="o">+</span> <span class="n">inverse_state_prep_circ</span>
<span class="n">combined_unitary</span> <span class="o">=</span> <span class="n">combined_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">combined_unitary</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
</pre></div>
</div>
<p>In the output we can see that, indeed, the Hadamard gate is its own inverse and when we append this circuit to the <code class="docutils literal notranslate"><span class="pre">state_prep_circ</span></code> it does in fact invert it, leaving us with the identity matrix:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| inverse_state_prep_circ: Circuit(operations=[H(2), H(1), H(0)], n_qubits=3)
ic| np.allclose(combined_unitary, np.eye(8)): True
</pre></div>
</div>
</div>
<div class="section" id="appending-operations-to-a-circuit">
<span id="appending-circuits"></span><h3>Appending operations to a circuit<a class="headerlink" href="#appending-operations-to-a-circuit" title="Permalink to this headline">#</a></h3>
<p>You don’t have to build a whole circuit all at once! Let’s see how to append operations to an existing circuit by constructing the next part of our QAOA circuit, the problem hamiltonian circuit. This problem hamiltonian circuit gives a quantum description of the problem and shows how the nodes are connected. In this case, the 3 nodes are all-to-all connected, so our circuit should look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>q_0: ──■───────────────────■────■───────────────────■───────────────────────────
     ┌─┴─┐┌─────────────┐┌─┴─┐  │                   │
q_1: ┤ X ├┤ Rz($\beta$) ├┤ X ├──┼───────────────────┼────■───────────────────■──
     └───┘└─────────────┘└───┘┌─┴─┐┌─────────────┐┌─┴─┐┌─┴─┐┌─────────────┐┌─┴─┐
q_2: ─────────────────────────┤ X ├┤ Rz($\beta$) ├┤ X ├┤ X ├┤ Rz($\beta$) ├┤ X ├
                              └───┘└─────────────┘└───┘└───┘└─────────────┘└───┘
</pre></div>
</div>
<p>We’ll build up this circuit one connection at a time, using <code class="docutils literal notranslate"><span class="pre">+=</span></code> to append <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> objects to the end of our existing <code class="docutils literal notranslate"><span class="pre">problem_hamiltonian_circ</span></code>. For now, don’t worry about what the <code class="docutils literal notranslate"><span class="pre">beta</span></code> variables mean in these circuits.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem_hamiltonian_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">0</span><span class="p">])(</span><span class="mi">1</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="n">problem_hamiltonian_circ</span> <span class="o">+=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">1</span><span class="p">])(</span><span class="mi">2</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="n">problem_hamiltonian_circ</span> <span class="o">+=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">2</span><span class="p">])(</span><span class="mi">2</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
<p>We’ll cover information about the <code class="docutils literal notranslate"><span class="pre">beta</span></code> variables later when we talk about <a class="reference internal" href="#symbolic-gates"><span class="std std-ref">symbolic gates</span></a>. Just notice that we started with an initial circuit and we were able to append other circuits to it using <code class="docutils literal notranslate"><span class="pre">+=</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With these <code class="docutils literal notranslate"><span class="pre">RZ</span></code> gates, you might have noticed that there seem to be 2 arguments, first the angle argument, then the index of the qubit it operates on. If you did notice that, you’d be correct! The <strong>syntax for parameterized gates</strong> is <code class="docutils literal notranslate"><span class="pre">GATE(angle)(qubit)</span></code></p>
<p>In our approach <code class="docutils literal notranslate"><span class="pre">RZ</span></code> is treated as a family of gates, and the parameter specifies the concrete member of the family. Hence, the syntax is always the same (<code class="docutils literal notranslate"><span class="pre">GATE(qubit)</span></code>), it’s just that <code class="docutils literal notranslate"><span class="pre">RZ(beta)</span></code> is a <code class="docutils literal notranslate"><span class="pre">GATE</span></code> that needs to be applied to some qubit.</p>
</div>
<p>Let’s get the <a class="reference internal" href="#getting-unitary"><span class="std std-ref">unitary matrix</span></a> again and see if it makes sense for this circuit</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">unitary</span> <span class="o">=</span> <span class="n">problem_hamiltonian_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="n">unitary</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should be 8x8 matrix</span>
<span class="n">ic</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">unitary</span><span class="p">))</span>  <span class="c1"># sympy matrix</span>
</pre></div>
</div>
<p>The output should look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| unitary.shape: (8, 8)
ic| type(unitary): &lt;class &#39;sympy.matrices.immutable.ImmutableDenseMatrix&#39;&gt;
</pre></div>
</div>
<p>For more info on why this is a sympy matrix as opposed to a numpy ndarray, please see the section on <a class="reference internal" href="#symbolic-gates"><span class="std std-ref">symbolic gates</span></a>.</p>
<p>Appending individual gates to circuits is also possible, as we’ll see when we build up the mixing circuit for this QAOA problem. The mixing circuit looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>     ┌──────────────┐
q_0: ┤ Rx($\gamma$) ├
     ├──────────────┤
q_1: ┤ Rx($\gamma$) ├
     ├──────────────┤
q_2: ┤ Rx($\gamma$) ├
     └──────────────┘
</pre></div>
</div>
<p>To build up the mixing circuit, we need to put parametrized RX gate on each of the qubits. We can do that with a for loop:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mixing_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N_QUBITS</span><span class="p">):</span>
    <span class="n">mixing_circ</span> <span class="o">+=</span> <span class="n">RX</span><span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">])(</span><span class="n">i</span><span class="p">)</span>
<span class="n">ic</span><span class="p">(</span><span class="n">mixing_circ</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">orquestra-quantum</span></code> comes with a <a class="reference external" href="https://github.com/zapatacomputing/orquestra-quantum/blob/main/src/orquestra/quantum/circuits/_generators.py#L14=">built-in utility function</a> that puts down a layer of the same single-qubit gate acting on all qubits.</p>
</div>
<p>The output of that looks like <code class="docutils literal notranslate"><span class="pre">mixing_circ:</span> <span class="pre">Circuit(operations=[RX(gamma_0)(0),</span> <span class="pre">RX(gamma_1)(1),</span> <span class="pre">RX(gamma_2)(2)],</span> <span class="pre">n_qubits=3)</span></code>. Again, for now don’t worry about the <code class="docutils literal notranslate"><span class="pre">gamma</span></code> parameters in there, that will be addressed in the <a class="reference internal" href="#symbolic-gates"><span class="std std-ref">symbolic gates</span></a> section.</p>
</div>
<div class="section" id="inspecting-circuits-and-components">
<span id="inspecting-circuits"></span><h3>Inspecting circuits and components<a class="headerlink" href="#inspecting-circuits-and-components" title="Permalink to this headline">#</a></h3>
<p>Now that we have all three sub-circuits of our overall QAOA circuit, we can put them all together! We can do this by just adding them and storing the result in a new <code class="docutils literal notranslate"><span class="pre">qaoa_circ</span></code> variable</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qaoa_circ</span> <span class="o">=</span> <span class="n">state_prep_circ</span> <span class="o">+</span> <span class="n">problem_hamiltonian_circ</span> <span class="o">+</span> <span class="n">mixing_circ</span>
</pre></div>
</div>
<p>Now let’s look at that QAOA circuit to double-check everything makes sense.</p>
<p><strong>Printing overall circuit information</strong> can be done by calling <code class="docutils literal notranslate"><span class="pre">print()</span></code> or <code class="docutils literal notranslate"><span class="pre">ic</span></code> on the <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> you want information for</p>
<p><strong>Getting the number of qubits</strong> in a <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> can be done by accessing the <code class="docutils literal notranslate"><span class="pre">n_qubits</span></code> property.</p>
<p>The <strong>operations property</strong> is a list containing all the operations, and so it can be iterated over and information about specific operations can be obtained. <strong>Getting the total number of operations</strong> in a <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> can be done by calling <code class="docutils literal notranslate"><span class="pre">len()</span></code> on the <code class="docutils literal notranslate"><span class="pre">operations</span></code> property.</p>
<p>Here are examples of how to get the above information about our <code class="docutils literal notranslate"><span class="pre">qaoa_circ</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span><span class="p">(</span><span class="n">qaoa_circ</span><span class="p">)</span>
<span class="n">ic</span><span class="p">(</span><span class="n">qaoa_circ</span><span class="o">.</span><span class="n">n_qubits</span><span class="p">)</span>
<span class="n">ic</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qaoa_circ</span><span class="o">.</span><span class="n">operations</span><span class="p">))</span>
<span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">qaoa_circ</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
    <span class="n">ic</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">gate</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">qubit_indices</span><span class="p">,</span> <span class="n">op</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<p>That will produce this output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| qaoa_circ: Circuit(operations=[H(0), H(1), H(2), CNOT(0,1), RZ(beta_0)(1), CNOT(0,1), CNOT(0,2), RZ(beta_1)(2), CNOT(0,2), CNOT(1,2), RZ(beta_2)(2), CNOT(1,2), RX(gamma_0)(0), RX(gamma_1)(1), RX(gamma_2)(2)], n_qubits=3)
ic| qaoa_circ.n_qubits: 3
ic| len(qaoa_circ.operations): 15
ic| op.gate.name: &#39;H&#39;, op.qubit_indices: (0,), op.params: ()
ic| op.gate.name: &#39;H&#39;, op.qubit_indices: (1,), op.params: ()
ic| op.gate.name: &#39;H&#39;, op.qubit_indices: (2,), op.params: ()
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (0, 1), op.params: ()
ic| op.gate.name: &#39;RZ&#39;, op.qubit_indices: (1,), op.params: (beta_0,)
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (0, 1), op.params: ()
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (0, 2), op.params: ()
ic| op.gate.name: &#39;RZ&#39;, op.qubit_indices: (2,), op.params: (beta_1,)
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (0, 2), op.params: ()
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (1, 2), op.params: ()
ic| op.gate.name: &#39;RZ&#39;, op.qubit_indices: (2,), op.params: (beta_2,)
ic| op.gate.name: &#39;CNOT&#39;, op.qubit_indices: (1, 2), op.params: ()
ic| op.gate.name: &#39;RX&#39;, op.qubit_indices: (0,), op.params: (gamma_0,)
ic| op.gate.name: &#39;RX&#39;, op.qubit_indices: (1,), op.params: (gamma_1,)
ic| op.gate.name: &#39;RX&#39;, op.qubit_indices: (2,), op.params: (gamma_2,)
</pre></div>
</div>
</div>
<div class="section" id="powers-of-gates-and-gate-exponentials">
<h3>Powers of gates and gate exponentials<a class="headerlink" href="#powers-of-gates-and-gate-exponentials" title="Permalink to this headline">#</a></h3>
<p>You can add a power of arbitrary non-symbolic gates to your circuit, as well as get the gate exponential. This won’t be used in the creation of our QAOA circuit, but we’ll still provide examples here.</p>
<p><strong>To raise a gate to a power</strong>, you can use <code class="docutils literal notranslate"><span class="pre">.power(exponent)</span></code> with the <code class="docutils literal notranslate"><span class="pre">exponent</span></code> argument the power you want to raise the gate to. Here we verify that the Hadamard gate raised to the 2nd power is the same as the identity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">matrix</span> <span class="o">==</span> <span class="n">sympy</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Where the output is <code class="docutils literal notranslate"><span class="pre">ic|</span> <span class="pre">H.power(2).matrix</span> <span class="pre">==</span> <span class="pre">sympy.eye(2):</span> <span class="pre">True</span></code></p>
<p><strong>To get the gate exponential</strong> of a specific gate, you can use <code class="docutils literal notranslate"><span class="pre">.exp</span></code>, shown in this example with <code class="docutils literal notranslate"><span class="pre">.matrix</span></code> to view what the matrix looks like. It is also generally a good idea to simplify the matrix when possible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span><span class="p">(</span><span class="n">sympy</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="gate-operations-vs-wave-function-operations">
<span id="wavefunction-operations"></span><h3>Gate operations vs wave function operations<a class="headerlink" href="#gate-operations-vs-wave-function-operations" title="Permalink to this headline">#</a></h3>
<p>While gate operations perform the familiar gates on the qubits of a circuit, <a class="reference external" href="https://github.com/zapatacomputing/orquestra-quantum/blob/main/src/orquestra/quantum/circuits/_wavefunction_operations.py">wave function operations</a> can operate on the wave function directly. This is convenient if the operation you want to perform is not easily expressible using gates or is not unitary at all. It can also be used to quickly prepare your simulation in a given state if you know the amplitude vector of this state. Currently, the only built-in wave function operation in Orquestra is the <code class="docutils literal notranslate"><span class="pre">MultiPhaseOperation</span></code>, which allows a specific phase (given as an angle theta) to be applied to all 2^N components of the wave function for an N-qubit circuit.</p>
<p>Wave function operations can be included in the <a class="reference internal" href="#creating-circuits"><span class="std std-ref">creation of a circuit</span></a>, <a class="reference internal" href="#appending-circuits"><span class="std std-ref">appended later</span></a>, and <a class="reference internal" href="#inspecting-circuits"><span class="std std-ref">inspected</span></a> in the same manner GateOperations can be.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><code class="docutils literal notranslate"><span class="pre">Circuit</span></code>s containing wave function operations generally cannot be run on backends. Simulators are usually able to.</p>
</div>
</div>
</div>
<div class="section" id="symbolic-gates">
<span id="id1"></span><h2>Symbolic gates<a class="headerlink" href="#symbolic-gates" title="Permalink to this headline">#</a></h2>
<p>Symbolic gates allow the user to specify parametric gates in terms of parameters that can be set to a specific value/angle later. This allows for a few benefits:</p>
<ol class="arabic simple">
<li><p>You can create the circuit once and bind the parameters later. Sometimes this saves on computational cost, and it allows for more easily understandable implementations of certain circuits, like the QAOA circuit in this example.</p></li>
<li><p>It gives you a closed formula for the final state of the circuit. This allows users interested in mathematical description and manipulations of the state easier access than could be obtained by varying parameters and running the same circuit multiple times. However, when doing symbolic simulation of the circuit, the performance of the simulation is substantially worse than if the parameters were bound.</p></li>
</ol>
<p>Zapata has created the <a class="reference external" href="https://github.com/zapatacomputing/orquestra-quantum/blob/main/tests/orquestra/quantum/symbolic_simulator_test.py">SymbolicSimulator</a> which is purpose-built for running symbolic simulation of the circuit.</p>
<div class="section" id="using-gates-with-symbolic-parameters">
<h3>Using gates with symbolic parameters<a class="headerlink" href="#using-gates-with-symbolic-parameters" title="Permalink to this headline">#</a></h3>
<p>In order to use symbols in symbolic gates, you need to <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">sympy</span></code> and define some symbols at the top of the file. We recommend doing so just under where you defined <code class="docutils literal notranslate"><span class="pre">N_QUBITS</span></code>. In our examples, we’ll use the following symbols.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">beta</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;beta_0:3&quot;</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">gamma</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;gamma_0:3&quot;</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s2">&quot;theta&quot;</span><span class="p">,</span> <span class="n">real</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>For more info on using sympy, please see the <a class="reference external" href="https://docs.sympy.org/latest/index.html">sympy documentation</a>.</p>
<p>As previously seen in the section on <a class="reference internal" href="#appending-circuits"><span class="std std-ref">appending circuits</span></a> gates can be added to <code class="docutils literal notranslate"><span class="pre">Circuits</span></code> with symbolic parameters in place of “standard” parameters. The syntax for parametric gates is <code class="docutils literal notranslate"><span class="pre">GATE(angle)(qubit)</span></code>. Here is the example from the problem hamiltonian circuit from before</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">problem_hamiltonian_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">0</span><span class="p">])(</span><span class="mi">1</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="n">problem_hamiltonian_circ</span> <span class="o">+=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">1</span><span class="p">])(</span><span class="mi">2</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="n">problem_hamiltonian_circ</span> <span class="o">+=</span> <span class="n">Circuit</span><span class="p">([</span><span class="n">CNOT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">RZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">2</span><span class="p">])(</span><span class="mi">2</span><span class="p">),</span> <span class="n">CNOT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
</pre></div>
</div>
<p>Sympy returns a list of symbols to the <code class="docutils literal notranslate"><span class="pre">beta</span></code> and <code class="docutils literal notranslate"><span class="pre">gamma</span></code> variables above, so we access a specific symbol within the list with its index.</p>
<p>Note that when you call <code class="docutils literal notranslate"><span class="pre">.to_unitary()</span></code> on a Circuit where some parameters are free symbolic parameters, the resulting matrix is a sympy matrix rather than a numpy matrix, as seen in these lines and their output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">unitary</span> <span class="o">=</span> <span class="n">problem_hamiltonian_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="n">unitary</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># should be 8x8 matrix</span>
<span class="n">ic</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">unitary</span><span class="p">))</span>  <span class="c1"># sympy matrix</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| unitary.shape: (8, 8)
ic| type(unitary): &lt;class &#39;sympy.matrices.immutable.ImmutableDenseMatrix&#39;&gt;
</pre></div>
</div>
</div>
<div class="section" id="binding-parameters">
<h3>Binding parameters<a class="headerlink" href="#binding-parameters" title="Permalink to this headline">#</a></h3>
<p>When you use a symbolic parameter in a gate, that parameter is referred to as a “free parameter” and it has no value. In order to assign it a value, you need to bind the parameter.</p>
<p>Before binding the parameters, lets see what free parameters we have in our <code class="docutils literal notranslate"><span class="pre">qaoa_circ</span></code> with <code class="docutils literal notranslate"><span class="pre">free_symbols</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span><span class="p">(</span><span class="n">qaoa_circ</span><span class="o">.</span><span class="n">free_symbols</span><span class="p">)</span>
</pre></div>
</div>
<p>That should output <code class="docutils literal notranslate"><span class="pre">ic|</span> <span class="pre">qaoa_circ.free_symbols:</span> <span class="pre">[beta_0,</span> <span class="pre">beta_1,</span> <span class="pre">beta_2,</span> <span class="pre">gamma_0,</span> <span class="pre">gamma_1,</span> <span class="pre">gamma_2]</span></code> because we have 3 beta parameters and 3 gamma parameters that are still free.</p>
<p>We can choose which parameters to bind in our circuit, so first let’s just bind the beta parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bound_beta_circ</span> <span class="o">=</span> <span class="n">qaoa_circ</span><span class="o">.</span><span class="n">bind</span><span class="p">({</span><span class="n">beta</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">beta</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">beta</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mf">0.1</span><span class="p">})</span>
<span class="n">ic</span><span class="p">(</span><span class="n">bound_beta_circ</span><span class="o">.</span><span class="n">free_symbols</span><span class="p">)</span>
</pre></div>
</div>
<p>This should output <code class="docutils literal notranslate"><span class="pre">ic|</span> <span class="pre">bound_beta_circ.free_symbols:</span> <span class="pre">[gamma_0,</span> <span class="pre">gamma_1,</span> <span class="pre">gamma_2]</span></code> as the <code class="docutils literal notranslate"><span class="pre">beta</span></code> parameters have been bound, but the gamma parameters have not.</p>
<p>Now let’s bind the gamma parameters and check what the <a class="reference internal" href="#getting-unitary"><span class="std std-ref">resulting unitary’s</span></a> type is.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bound_all_circ</span> <span class="o">=</span> <span class="n">bound_beta_circ</span><span class="o">.</span><span class="n">bind</span><span class="p">({</span><span class="n">gamma</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">gamma</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">gamma</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mf">0.2</span><span class="p">})</span>
<span class="n">ic</span><span class="p">(</span><span class="n">bound_all_circ</span><span class="o">.</span><span class="n">free_symbols</span><span class="p">)</span>
<span class="n">unitary</span> <span class="o">=</span> <span class="n">bound_all_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span>
<span class="n">ic</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">unitary</span><span class="p">))</span>
</pre></div>
</div>
<p>We can see in the output that there are no more free parameters and that when all the parameters are bound, the unitary matrix is again a numpy ndarray, rather than a sympy matrix:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ic| bound_all_circ.free_symbols: []
ic| type(unitary): &lt;class &#39;numpy.ndarray&#39;&gt;
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Please note that <code class="docutils literal notranslate"><span class="pre">Circuits</span></code> which still have free parameters are not suited to run on most backends. At this time only Zapata’s SymbolicSimulator is able to run them.</p>
</div>
</div>
</div>
<div class="section" id="using-custom-gates">
<h2>Using custom gates<a class="headerlink" href="#using-custom-gates" title="Permalink to this headline">#</a></h2>
<p>Our libraries let users define gates that can be re-used multiple times. This is especially useful for common sub-circuits like the <code class="docutils literal notranslate"><span class="pre">CNOT,</span> <span class="pre">RZ,</span> <span class="pre">CNOT</span></code> sequence in our <code class="docutils literal notranslate"><span class="pre">problem_hamiltonian_circ</span></code>. Lets make a custom gate to implement that</p>
<div class="section" id="defining-custom-gates">
<h3>Defining custom gates<a class="headerlink" href="#defining-custom-gates" title="Permalink to this headline">#</a></h3>
<p>In order to define a custom gate you need to give 3 things to the <code class="docutils literal notranslate"><span class="pre">CustomGateDefinition</span></code> class:</p>
<ol class="arabic simple">
<li><p>the name of the gate</p></li>
<li><p>the matrix that defines the gate</p></li>
<li><p>the order of any parameters for the gate</p></li>
</ol>
<p>In our case, we want to combine a CNOT, an RZ, and a final CNOT gate into a single gate. We’ll call this gate <code class="docutils literal notranslate"><span class="pre">ZZ</span></code> and get the matrix by doing the needed matrix multiplications. There’s only one parameter in this case (we’ll call it <code class="docutils literal notranslate"><span class="pre">theta</span></code>) so the order doesn’t matter.</p>
<p>Here’s our <code class="docutils literal notranslate"><span class="pre">ZZ</span></code> example all together:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">custom_matrix</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">Matrix</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mf">1.0</span> <span class="o">*</span> <span class="n">sympy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">sympy</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">sympy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">sympy</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">sympy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">sympy</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">sympy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">sympy</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)],</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">ZZ</span> <span class="o">=</span> <span class="n">CustomGateDefinition</span><span class="p">(</span>
    <span class="n">gate_name</span><span class="o">=</span><span class="s2">&quot;ZZ&quot;</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">custom_matrix</span><span class="p">,</span> <span class="n">params_ordering</span><span class="o">=</span><span class="p">(</span><span class="n">theta</span><span class="p">,)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="instantiating-custom-gates">
<h3>Instantiating custom gates<a class="headerlink" href="#instantiating-custom-gates" title="Permalink to this headline">#</a></h3>
<p>You can use a custom gate in the same way as you would use a standard gate. To show this working, let’s re-create the problem hamiltonian circuit, but this time using our new, custom <code class="docutils literal notranslate"><span class="pre">ZZ</span></code> gate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_problem_ham_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span>
    <span class="p">[</span><span class="n">ZZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">0</span><span class="p">])(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">1</span><span class="p">])(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">ZZ</span><span class="p">(</span><span class="n">beta</span><span class="p">[</span><span class="mi">2</span><span class="p">])(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">ic</span><span class="p">(</span><span class="n">new_problem_ham_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()</span> <span class="o">==</span> <span class="n">problem_hamiltonian_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">())</span>
</pre></div>
</div>
<p>This should give us <code class="docutils literal notranslate"><span class="pre">ic|</span> <span class="pre">new_problem_ham_circ.to_unitary()</span> <span class="pre">==</span> <span class="pre">problem_hamiltonian_circ.to_unitary():</span> <span class="pre">True</span></code> because the two circuits are equivalent.</p>
</div>
<div class="section" id="getting-custom-gates-from-a-circuit">
<h3>Getting custom gates from a circuit<a class="headerlink" href="#getting-custom-gates-from-a-circuit" title="Permalink to this headline">#</a></h3>
<p>To get a list of all the custom gate definitions in a <code class="docutils literal notranslate"><span class="pre">Circuit</span></code>, you can use the <code class="docutils literal notranslate"><span class="pre">collect_custom_gate_definitions()</span></code> method. Let’s do that on our <code class="docutils literal notranslate"><span class="pre">new_problem_ham_circ</span></code> circuit:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ic</span><span class="p">(</span><span class="n">new_problem_ham_circ</span><span class="o">.</span><span class="n">collect_custom_gate_definitions</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should just show our <code class="docutils literal notranslate"><span class="pre">ZZ</span></code> gate:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[CustomGateDefinition(gate_name=&#39;ZZ&#39;, matrix=Matrix([
[1.0*exp(-I*theta/2),                  0,                  0,                   0],
[                  0, 1.0*exp(I*theta/2),                  0,                   0],
[                  0,                  0, 1.0*exp(I*theta/2),                   0],
[                  0,                  0,                  0, 1.0*exp(-I*theta/2)]]), params_ordering=(theta,))]
</pre></div>
</div>
</div>
</div>
<div class="section" id="decompositions">
<h2>Decompositions<a class="headerlink" href="#decompositions" title="Permalink to this headline">#</a></h2>
<p>Decompostion is the process of representing gate operations using different (often simpler) gates. For instance, a SWAP gate can be represented as a series of 3 CNOT gates. Often, decomposition is needed to be able to run an algorithm on real hardware as different quantum computers have different sets of gate operations they can physically perform (also called “native gates”).</p>
<div class="section" id="creating-a-decompositionrule">
<h3>Creating a <code class="docutils literal notranslate"><span class="pre">DecompositionRule</span></code><a class="headerlink" href="#creating-a-decompositionrule" title="Permalink to this headline">#</a></h3>
<p>In order to create a <code class="docutils literal notranslate"><span class="pre">DecompositionRule</span></code> you need a <code class="docutils literal notranslate"><span class="pre">predicate</span></code> and a <code class="docutils literal notranslate"><span class="pre">production</span></code> method.</p>
<p><code class="docutils literal notranslate"><span class="pre">predicate</span></code> tells Orquestra Core what should be decomposed. This should be a method that accepts an operation and returns a boolean (True if it should be decomposed, False otherwise).</p>
<p><code class="docutils literal notranslate"><span class="pre">production</span></code> tells Orquestra Core how it should be decomposed. This method accepts an operation and returns a list of operations.</p>
<p>Your custom decomposition rule should implement the <a class="reference external" href="https://github.com/zapatacomputing/orquestra-quantum/blob/main/src/orquestra/quantum/decompositions/_decomposition.py#L12=">DecompositionRule</a> protocol. We can see an example of that in our QAOA example. Suppose we want to decompose our CNOT gate, here’s what that <code class="docutils literal notranslate"><span class="pre">CNOTDecompositionRule</span></code> class would look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CNOTDecompositionRule</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">production</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
        <span class="n">q0</span><span class="p">,</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">qubit_indices</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">H</span><span class="p">(</span><span class="n">q1</span><span class="p">),</span> <span class="n">CZ</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span> <span class="n">q1</span><span class="p">),</span> <span class="n">H</span><span class="p">(</span><span class="n">q1</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">predicate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">operation</span><span class="o">.</span><span class="n">gate</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;CNOT&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-decompositionrule">
<h3>Using a <code class="docutils literal notranslate"><span class="pre">DecompositionRule</span></code><a class="headerlink" href="#using-a-decompositionrule" title="Permalink to this headline">#</a></h3>
<p>In order to use a <code class="docutils literal notranslate"><span class="pre">DecompositionRule</span></code>, use the <code class="docutils literal notranslate"><span class="pre">decompose_operations()</span></code> method. This method accepts a list of operations and a <code class="docutils literal notranslate"><span class="pre">DecompositionRule</span></code> and returns a new list of operations where the rule has been applied.</p>
<p>Let’s apply our <code class="docutils literal notranslate"><span class="pre">CNOTDecompositionRule</span></code> to our problem hamiltonian circuit. Because the <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> class can accept a list of operations as a constructor argument, we can do this in one line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">decomposed_circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span>
    <span class="n">decompose_operations</span><span class="p">(</span><span class="n">bound_all_circ</span><span class="o">.</span><span class="n">operations</span><span class="p">,</span> <span class="p">[</span><span class="n">CNOTDecompositionRule</span><span class="p">()])</span>
<span class="p">)</span>
<span class="n">ic</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">decomposed_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">(),</span> <span class="n">bound_all_circ</span><span class="o">.</span><span class="n">to_unitary</span><span class="p">()))</span>
</pre></div>
</div>
<p>We can see here that the decomposed circuit is equivalent to the original circuit</p>
</div>
<div class="section" id="built-in-decompositions">
<h3>Built-in decompositions<a class="headerlink" href="#built-in-decompositions" title="Permalink to this headline">#</a></h3>
<p>There is currently only one built-in decomposition in <code class="docutils literal notranslate"><span class="pre">orquestra-quantum</span></code> and that is a <a class="reference external" href="https://github.com/zapatacomputing/orquestra-quantum/blob/main/src/orquestra/quantum/decompositions/_orquestra_decompositions.py">U3GateToRotation</a> decomposition.</p>
</div>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Guides</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
      &copy; Copyright 2022, Zapata Computing, Inc.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>